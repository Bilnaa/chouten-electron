<!DOCTYPE html>
<html>
<head>
  <title>Hidden Scraper</title>
</head>
<body>
    <div class="warning">
        <h1>Warning</h1>
        <p>This page is hidden and should not be accessed directly.</p>
        <p>If you are here you know what you need to do </p>
        <p>Do not close this window by any means because it will stop the scraping process and break the app</p>
    </div>
</body>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
    }

    .warning {
        padding: 20px;
        background-color: #f44336;
        color: white;
        text-align: center;
    }
    .warning h1 {
        margin: 0;
        font-size: 24px;
    }
    .warning p {
        margin: 10px 0;
    }
</style>
<script>
class Response {
    constructor(statusCode, body, contentType, headers) {
        this.statusCode = statusCode;
        this.body = body;
        this.contentType = contentType;
        this.headers = headers || {};
    }

    json() {
        return JSON.parse(this.body);
    }
}
</script>
<script>
  async function request(url, method, headers = {}, body = null) {
    const fetchResp = await fetch(url, {
        method,
        headers,
        body
    });

    const responseHeaders = {};
    fetchResp.headers.forEach((value, key) => {
        responseHeaders[key] = value;
    });

    return new Response(
        fetchResp.status,
        await fetchResp.text(),
        fetchResp.headers.get("content-type") || '',
        responseHeaders
    );
};


</script>
<script>
    async function callWebView(url, method, headers, body) {
    let response = await window.ipcRenderer.invoke('webview', { url, method, headers, body });
    return response;
}
</script>
</html>